!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;(n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).visualizer=t()}}(function(){return(function(){function t(n,e,i){function o(s,r){if(!e[s]){if(!n[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=e[s]={exports:{}};n[s][0].call(d.exports,function(t){return o(n[s][1][t]||t)},d,d.exports,t,n,e,i)}return e[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return t})()({1:[function(t,n,e){"use strict";var i=this&&this.__values||function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.renderCorrect=void 0;var o=t("./visualizerEvents");e.renderCorrect=function t(n,e,a){var s,r,l,c,d,u,f;if(void 0===a&&(a=!0),a&&(f=document.createElement("style"),f.innerHTML=".visualisation {\n	height: 100%;\n	width: 100%;\n	position: relative;\n}\n\n.visualisation .mistake {\n	/* background-color: #F8606055; */\n	transition: 0.5s;\n}\n\n.visualisation .boundADD {\n	/* background-color: #6060F855; */\n	text-decoration: underline;\n	color: #0077FF;\n}\n\n.visualisation .boundDEL {\n	color: #F86060;\n	text-decoration: line-through;\n}\n.visualisation .mistakeHovered {\n	filter: brightness(0.85);\n	cursor: pointer;\n}\n\n\n.visualisation .right {\n	text-align: right;\n	position: absolute;\n	top: 0;\n	margin-top: 5%;\n	right: 5%;\n}\n\n.visualisation .fieldName {\n	font-weight: bold;\n	font-size: 0.75em;\n}\n\n.visualisation .left {\n	/* float: left; */\n}\n\n.visualisation .head {\n	position: relative;\n	padding: 5%;\n\n	font-family: 'Roboto Serif';\n	font-style: normal;\n	font-weight: 400;\n	font-size: 1.5em;\n	line-height: 1.1em;\n}\n\n.visualisation .submission {\n	position: relative;\n	width: 90%;\n		left: 5%;\n		top: clamp(calc(10% + 7.5em), calc(20% + 7.5em), 20%);\n}\n\n.visualisation .text {\n	position: absolute;\n	width: 100%;\n	top: 7px;\n\n	font-family: 'Roboto Serif';\n	font-style: normal;\n	font-weight: 400;\n	font-size: 1.1em;\n		line-height: 1.1em;\n}\n\n.visualisation .mistakeLine {\n	background-color: #F86060;\n	position: absolute;\n	left: -15px;\n	width: 8.5px;\n	height: 1.1em;\n}\n\n\n/** tooltip stuff **/\n.visualisation .hiddenTooltip {\n	opacity: 0;\n}\n.visualisation .tooltip {\n	position: absolute;\n	width: min(230px, 15vw);\n	height: -moz-fit-content;\n		height: fit-content;\n	background-color: white;\n	border-radius: 2px 2px 2px 0px;\n	box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.25);\n	z-index: 1000;\n	transition: opacity 0.25s ease-out;\n	pointer-events: none;\n}\n\n.visualisation .line {\n	position: relative;\n	height: 0.5em;\n	background-color: #F86060;\n	border-radius: 2px 2px 0px 0px;\n}\n\n.visualisation .desc {\n	position: relative;\n	left: 9px;\n	top: 12%;\n	margin-top: 0.5em;\n		margin-bottom: 0.5em;\n		width: calc(min(230px, 15vw) - 18px);\n		height: fit-content;\n\n	font-family: 'Roboto Serif';\n	font-style: normal;\n	font-weight: 400;\n	font-size: 13px;\n	line-height: 15px;\n\n	color: #000000;\n}\n\n.visualisation .type {\n	position: relative;\n	right: 9px;\n	bottom: 2%;\n\n	font-family: 'Roboto Serif';\n	font-style: normal;\n	font-weight: 400;\n	font-size: 10px;\n	line-height: 12px;\n	text-align: right;\n\n	color: #000000;\n}\n.visualisation .footer {\n	position: relative;\n	right: 9px;\n		bottom: 2%;\n\n	font-family: 'Roboto Serif';\n	font-style: normal;\n	font-weight: 400;\n	font-size: 10px;\n	line-height: 12px;\n	text-align: right;\n\n	color: #000000;\n}\n\n.visualisation .tooltip::after {\n	content: \" \";\n	position: absolute;\n	top: 100%;\n	/* At the bottom of the tooltip */\n	left: -20px;\n	margin-left: 0px;\n	border-width: 20px;\n	border-style: solid;\n	border-color: white transparent transparent transparent;\n\n	clip-path: polygon(50% 0, 200% 0, 100% 200%, 50% 200%);\n	filter: drop-shadow(0px 0px 2px #000);\n}",document.getElementsByTagName("head")[0].appendChild(f)),e.isRejected)document.getElementById(n).innerHTML='<div class="visualisation">\n	<link rel="preconnect" href="https://fonts.googleapis.com"/>\n	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>\n	<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz@8..144&display=swap" rel="stylesheet"/>\n	<div class="left">\n		<span class="fieldName">Pateicamies par Jūsu dalību VIII pasaules diktātā latviešu valodā! <br> Diemžēl nevarējām izlabot Jūsu darbu, jo tas bija pārāk atšķirīgs no oriģināla. <br> Tas, iespējams, saistīts ar diakritisko zīmju trūkumu vai arī diktāts bija uzrakstīts tikai daļēji.</span>\n	</div>\n</div>';else{var p=e.text,$=0,v=[];try{for(var m=i(e.mistakes),h=m.next();!h.done;h=m.next()){var g=h.value;try{for(var y=(l=void 0,i(g.bounds)),b=y.next();!b.done;b=y.next()){var k=b.value;v.push({bounds:k,mistake:g})}}catch(x){l={error:x}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}}catch(E){s={error:E}}finally{try{h&&!h.done&&(r=m.return)&&r.call(m)}finally{if(s)throw s.error}}v.sort(function(t,n){return t.bounds.bounds.start-n.bounds.bounds.start});try{for(var _=i(v),w=_.next();!w.done;w=_.next()){var C=w.value,L=C.bounds.bounds.start,T=C.bounds.bounds.end,B=(g=C.mistake,e.text.substring(L,T)),N='<span class="mistake bound'.concat(C.bounds.type," ").concat(g.id,'" data-mid="').concat(g.id,'" data-description="').concat(g.description.replace(/\"/g,"&quot;"),'" data-stat="').concat(g.submissionStatistic,'" data-percent="').concat(g.percentage,'" data-type="').concat(g.mistakeType,'">').concat(B,"</span>").concat(e.text.charAt(T).match(/(\.|,|!|\?)/)?"":" ");p=p.substring(0,L+$)+N+p.substring(T+$),$+=N.length-B.length}}catch(z){d={error:z}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(d)throw d.error}}var M=e.mistakes.map(function(t){return t.typeCounter.ortho+t.typeCounter.punct}).reduce(function(t,n,e){return t+n}),j='<div class="visualisation">\n	<link rel="preconnect" href="https://fonts.googleapis.com"/>\n	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>\n	<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz@8..144&display=swap" rel="stylesheet"/>\n	<div class="tooltip hiddenTooltip" id="tooltip">\n    <div class="line"></div>\n    <div class="desc">placeholder description</div>\n    <div class="type">Kļūdas tips:</div>\n    <div class="footer">Kļūda fiksēta 0 (0%) darbos</div>\n</div>\n	<div class="head">\n		<div class="left">\n			<span class="fieldName">Ortogrāfijas kļūdas:</span><br>'.concat(e.mistakes.map(function(t){return t.typeCounter.ortho}).reduce(function(t,n,e){return t+n}),'<br>\n			<span class="fieldName">Interpunkcijas kļūdas:</span><br>').concat(e.mistakes.map(function(t){return t.typeCounter.punct}).reduce(function(t,n,e){return t+n}),'\n		</div>\n		<div class="right">\n			<span class="fieldName">Kopā:</span><br>').concat(M," ").concat(M>1?"kļūdas":"kļūda",'\n		</div>\n	</div>\n	<div class="submission">\n		<div class="text">\n			').concat(p.replace(/\n/g,"<br/>"),"\n		</div>\n	</div>\n</div>");document.getElementById(n).innerHTML=j,setTimeout(function(){(0,o.onResize)();var t=document.getElementById(n).getElementsByClassName("mistake");Array.prototype.forEach.call(t,function(t){t.addEventListener("click",function(n){(0,o.onClickMistake)(t,t.dataset.mid,n)}),t.addEventListener("mouseenter",function(n){(0,o.onEnterMistake)(n,t,t.dataset.description,parseInt(t.dataset.stat),parseFloat(t.dataset.percent),t.dataset.type,t.dataset.mid)}),t.addEventListener("mouseleave",function(n){(0,o.onLeaveMistake)(t.dataset.mid)})}),(0,o.registerClickHandler)()},0)}}},{"./visualizerEvents":2}],2:[function(t,n,e){"use strict";var i=this&&this.__values||function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.registerClickHandler=e.onResize=e.onClickMistake=e.onLeaveMistake=e.onEnterMistake=void 0;var o,a=!1;function s(){return document.getElementsByClassName("visualisation")[0]}function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0}function l(t){var n=0,e=0,i=t;do void 0!==i.scrollLeft&&(n+=i.scrollLeft),void 0!==i.scrollTop&&(e+=i.scrollTop),i=i.parentNode;while(i);return[n,e]}e.onEnterMistake=function t(n,e,i,r,l,c,d){if(Array.prototype.forEach.call(s().getElementsByClassName(d),function(t){return t.classList.add("mistakeHovered")}),!a){o&&clearTimeout(o),function t(n,e,i,o){var a=document.getElementById("tooltip"),s=Math.floor(1e3*i)/10;a.getElementsByClassName("desc")[0].innerHTML=n,a.getElementsByClassName("footer")[0].innerHTML=e>=0?"Kļūda fiksēta ".concat(e," (").concat(s>=.1?s:"<0.1","%) darbos"):"";var r="";switch(o){case"ORTHO":r="Ortogrāfijas";break;case"PUNCT":r="Interpunkcijas";break;case"TEXT":r="Trūkstošs Teksts"}a.getElementsByClassName("type")[0].innerHTML="Kļūdas tips: ".concat(r)}(i,r,l,c);var u=document.getElementById("tooltip"),f=e.getBoundingClientRect(),p=s().getBoundingClientRect();u.style.top="".concat(f.y-u.offsetHeight+-20-p.top,"px"),u.style.left="".concat(n.clientX-p.left,"px"),u.classList.remove("hiddenTooltip")}},e.onLeaveMistake=function t(n){if(Array.prototype.forEach.call(s().getElementsByClassName(n),function(t){return t.classList.remove("mistakeHovered")}),!a){var e=document.getElementById("tooltip");e.classList.add("hiddenTooltip"),o&&clearTimeout(o),o=setTimeout(function(){e.style.top="-420vh",e.style.left="-69vw"},250)}};var c=null;function d(){var t,n,e=s().getElementsByClassName("submission")[0].getElementsByClassName("mistake");try{for(var o=i(Array.from(s().querySelectorAll(".mistakeLine"))),a=o.next();!a.done;a=o.next())a.value.remove()}catch(r){t={error:r}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var l=[];Array.prototype.forEach.call(e,function(t){var n=t.getBoundingClientRect();l.includes(n.y)||(s().getElementsByClassName("text")[0].insertAdjacentHTML("afterend",'<div class="mistakeLine" style="top:'+(t.offsetTop+t.parentElement.offsetTop)+"px; height:"+n.height+'px;"></div>'),l.push(n.y))})}e.onClickMistake=function t(n,e,i){if(c){var o=new MouseEvent("mouseleave",{clientX:i.clientX,clientY:i.clientY});c.dispatchEvent(o)}var r=new MouseEvent("mouseenter",{clientX:i.clientX,clientY:i.clientY});if(n.dispatchEvent(r),c=n,a=!a)Array.prototype.forEach.call(s().getElementsByClassName(e),function(t){return t.style.background="#FFB74D55"});else{document.getElementById("tooltip").classList.add("hiddenTooltip"),Array.prototype.forEach.call(s().getElementsByClassName("mistake"),function(t){t.style.background="#F8606000"}),c=null;var l=new MouseEvent("mouseenter",{clientX:i.clientX,clientY:i.clientY});n.dispatchEvent(l)}},e.onResize=d,e.registerClickHandler=function t(){s().addEventListener("click",function(t){var n=t.target;do{if(n&&n.classList&&n.classList.contains("mistake"))return;n=n.parentNode}while(n);(function t(n){if(c){a=!1,Array.prototype.forEach.call(s().getElementsByClassName("mistake"),function(t){t.style.background="#F8606000"});var e=new MouseEvent("mouseleave",{clientX:n.clientX,clientY:n.clientY});c.dispatchEvent(e),c=null}})(t)}),new ResizeObserver(d).observe(s())}},{}]},{},[1])(1)});